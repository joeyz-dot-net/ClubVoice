[server]

# 服务器监听地址 (0.0.0.0 = 所有网络接口)
host = 0.0.0.0

# 服务器端口号
port = 5000

# 调试模式 (true = 显示详细日志)
debug = true


[audio]

# 通信模式: full = 全双工(可同时收发), half = 半双工(仅接收)
duplex_mode = full

# 混音模式: true = 混合 Clubdeck + MPV 音频发送给浏览器
mix_mode = true

[VAD Browser]
# 浏览器音量闪避: true = 浏览器用户说话时降低 Clubdeck 接收音量
browser_ducking_enabled = false

# 闪避触发阈值 (麦克风幅值, 范围 0-32768, 建议 50-200)
ducking_threshold = 300

# 闪避时的音量 (0.0 = 完全静音, 1.0 = 不降低)
ducking_gain = 0.15


[VAD MPV]

# MPV 音量闪避: true = Clubdeck 房间有人说话时自动降低 MPV 音量
mpv_ducking_enabled = true

# 闪避最小持续时间 (秒)
ducking_min_duration = 0.1

# 闪避释放时间 (秒, 停止说话后多久恢复音量)
ducking_release_time = 1

# 音量过渡时间 (秒, 闪避开始/结束的渐变速度)
ducking_transition_time = 0.1

# 闪避时 MPV 音量 (百分比)
ducking_volume = 30

# 正常 MPV 音量 (百分比)
normal_volume = 50

[VB Cable]

# === 3-Cable 架构设备配置 ===

# CABLE-C: Clubdeck 房间音频输入 (Clubdeck Speaker -> Python)
clubdeck_input_device_id = 34

# CABLE-B: MPV 音乐输入 (MPV -> Python)
mpv_input_device_id = 35

# CABLE-A: 浏览器麦克风输出 (Python -> Clubdeck Mic)
browser_output_device_id = 28


[cors]

# 跨域资源共享 (CORS) 配置

# 是否启用 CORS
enabled = true

# 允许访问的域名列表 (逗号分隔)
allowed_origins = http://localhost:5000,http://127.0.0.1:5000,http://localhost:8080,http://127.0.0.1:8080,
                  http://d.joeyz.net,https://d.joeyz.net,http://c.joeyz.net,https://c.joeyz.net,
                  http://e.joeyz.net,https://e.joeyz.net,http://p.joeyz.net,https://p.joeyz.net,
                  http://b.joeyz.net,https://b.joeyz.net


[mpv]

# MPV 音乐播放器控制配置

# 是否启用 MPV 控制
enabled = true

# MPV 命名管道路径 (Windows Named Pipe)
default_pipe = \\.\pipe\mpv-pipe
