"""
检查浏览器→Clubdeck音频通路
"""
print("""
═══════════════════════════════════════════════════════════════════
🎤 检查浏览器→Clubdeck音频通路
═══════════════════════════════════════════════════════════════════

请按以下步骤排查：

步骤1: 检查浏览器麦克风是否开启
───────────────────────────────────────────────────────────────────
  打开 http://localhost:5000/debug.html
  
  查看左上角状态：
  • 麦克风: 关闭  ❌ → 需要点击"开启麦克风"按钮
  • 麦克风: 开启  ✅ → 继续下一步
  
  查看"麦克风音量"进度条：
  • 说话时应该有绿色波动
  • 如果没有波动，检查浏览器麦克风权限

步骤2: 检查Python是否接收到音频数据  
───────────────────────────────────────────────────────────────────
  在 debug.html 页面查看"统计信息"面板：
  
  • 发送包数: 应该持续增加（说话时每秒90+）
  • 如果发送包数=0，说明浏览器没有发送数据

步骤3: 检查Clubdeck麦克风设置
───────────────────────────────────────────────────────────────────
  打开 Clubdeck 音频设置：
  
  麦克风输入设备 必须设置为:
    ✅ CABLE-A Output (VB-Audio Virtual Cable A)
  
  如果设置错误，Clubdeck收不到浏览器的声音

步骤4: 测试CABLE-A Output音量
───────────────────────────────────────────────────────────────────
  运行以下命令监控设备36（CABLE-A Output）：
  
    echo 36 | python tools/simple_volume_monitor.py
  
  然后：
  1. 在浏览器开启麦克风
  2. 对着麦克风说话
  3. 查看音量监控器是否有波动
  
  • 有波动 ✅ → Python写入成功，检查Clubdeck设置
  • 无波动 ❌ → Python没有写入，检查输出流

═══════════════════════════════════════════════════════════════════
快速诊断命令：
═══════════════════════════════════════════════════════════════════

# 1. 监控CABLE-A Output（Clubdeck应该从这里读取浏览器音频）
echo 36 | python tools/simple_volume_monitor.py

# 2. 检查Python终端日志
#    查找 "Output stream started" 确认输出流已启动

═══════════════════════════════════════════════════════════════════
最可能的问题：
═══════════════════════════════════════════════════════════════════

1. 浏览器麦克风没有开启（最常见）
   → 在 debug.html 点击"开启麦克风"

2. Clubdeck麦克风输入设备设置错误
   → 必须设置为 CABLE-A Output

3. 浏览器麦克风权限被拒绝
   → 检查浏览器地址栏是否有麦克风图标，允许权限

═══════════════════════════════════════════════════════════════════
""")
